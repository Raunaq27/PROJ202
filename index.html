<!DOCTYPE html>
<html lang="en">

<head runat="server">
    <title></title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>

    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <form id="form1" runat="server">
        <div id="mapid">
        </div>
    </form>
    <script>
        // Simulating data for the map to test the codes
        var data = {
            // lat.data[i][1] as latitude
            y: {
                data: [
                    // weeping peninsula
                    ['Morne Moangrave', 144],
                    ['Beside the Rampart Gaol', 240],
                    ['Behind the Castle', 262],
                    ['Castle Morne Lift', 349],
                    ['Castle Morne Rampart', 676],
                    ['Beside the Crater-Pocked Glade', 796],
                    ['South of the Lookout Tower', 814],
                    ['Ailing Village Outskirts', 808],
                    ['Tombsward Catacombs', 832],
                    ['Morne Tunnel', 694],
                    ['Tombsward', 720],
                    ['Tombsward Cave', 771],
                    [' Fourth Church of Marika', 799],
                    ["Isolated Merchant's Shack", 635],
                    ['Church of Pilgrimage', 1033],
                    ['Earthbore Cave', 916],
                    ['Bridge of Sacrifice', 947],
                    ["Impaler's Catacombs", 908],
                    // limgrave

                ]

            },
            // lng.data[i][1] as longtitude
            x: {
                data: [
                    // weeping peninsula
                    [0, 2325],
                    [0, 2362],
                    [0, 2379],
                    [0, 2430],
                    [0, 2609],
                    [0, 2693],
                    [0, 2529],
                    [0, 2494],
                    [0, 2274],
                    [0, 2377],
                    [0, 2211],
                    [0, 2063],
                    [0, 1994],
                    [0, 1955],
                    [0, 2264],
                    [0, 2468],
                    [0, 2627],
                    [0, 2726],
                    // limgrave

                ]
            }
        };


        bindMap(data);


        function bindMap(data) {

            var greenIcon = L.icon({
                iconUrl: './assets/icons.png',
                //shadowUrl:  'images/marker-icon.png',

                iconSize: [30, 30], // size of the icon
                shadowSize: [50, 64], // size of the shadow
                iconAnchor: [15, 15], // point of the icon which will correspond to marker's location
                shadowAnchor: [4, 62],  // the same for the shadow
                popupAnchor: [5, 5] // point from which the popup should open relative to the iconAnchor
            });

            //var element = chart.selector.replace('#', '');
            var map = L.map('mapid', {
                crs: L.CRS.Simple,
                minZoom: -2
            });

            var bounds = [[0, 0], [6809, 6509]];
            var image = L.imageOverlay('./assets/map.jpeg', bounds).addTo(map);

            map.fitBounds(bounds);

            for (var i = 0; i < data.y.data.length; i++) {
                center = [data.y.data[i][1], data.x.data[i][1]];
                L.marker(center, { icon: greenIcon }).addTo(map).bindPopup("Lat: " + data.y.data[i][0] + "<br/>Lon: " + data.x.data[i][1]);//.openPopup();;

            }

            setInterval(() => {
                map.invalidateSize();
            }, 500);

        }
    </script>
</body>

</html>